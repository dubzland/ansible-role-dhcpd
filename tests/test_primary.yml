---
- hosts: localhost
  remote_user: root
  roles:
    - role: dubzland-dhcpd
      vars:
        dubzland_dhcpd_interfaces:
          - ens18
        dubzland_dhcpd_failovers:
          - name: dubzland-failover
            primary: "{{ ansible_default_ipv4.address }}"
            secondary: 10.0.10.3
            split: 128
        dubzland_dhcpd_keys:
          - name: dubzland
            secret: 1234567890ABCDEF
        dubzland_dhcpd_zones:
          - name: servers.local.dubzland.net
            primary: 10.0.10.2
            key: dubzland
  tasks:
    - name: grab dhcpd.conf
      command: /bin/cat /etc/dhcp/dhcpd.conf
      register: dhcpd_conf
    - name: dump dhcpd.conf
      debug:
        msg: "{{ dhcpd_conf.stdout_lines }}"
      when:
        dhcpd_conf is defined
