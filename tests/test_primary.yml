---
- hosts: localhost
  remote_user: root
  roles:
    - role: dubzland-dhcpd
      vars:
        dubzland_dhcpd_interfaces:
          - ens18
        dubzland_dhcpd_failovers:
          - name: dubzland-failover
            primary: "{{ ansible_default_ipv4.address }}"
            secondary: 10.0.10.3
  tasks:
    - name: dump the network interfaces
      debug:
        msg: "interfaces: {{ ansible_all_ipv4_addresses }}"
    - name: grab dhcpd.conf
      command: /bin/cat /etc/dhcp/dhcpd.conf
      register: dhcpd_conf
    - name: dump dhcpd.conf
      debug:
        msg: "{{ dhcpd_conf.stdout_lines }}"
      when:
        dhcpd_conf is defined
